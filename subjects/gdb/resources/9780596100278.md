# GNU Pocket Reference
<img src="../../covers/9780596100278.jpg" width="200"/>

If your program is compiled with the GNU Compiler Collection (GCC), using
the -g3 and -gdwarf-2 options, GDB understands references to C preprocessor
macros.

*****

GDB allows you to specify several different kinds of files when doing
debugging:

*****

The exec file is the executable program to be debugged

*****

The optional core file is a memory dump generated by the program when it
dies

*****

Core files are usually named core on commercial Unix systems. On BSD
systems, they are named program.core. On GNU/Linux systems, they are named
core.PID, where PID represents the process ID number. This lets you keep
multiple core dumps, if necessary.

*****

The symbol file is a separate file from which GDB can read symbol
information: information describing variable names, types, sizes, and
locations in the executable file.

*****

There are different ways to stop your program:

*****

A breakpoint specifies that execution should stop at a particular source
code location.

*****

A watchpoint indicates that execution should stop when a particular memory
location changes value.

*****

A catchpoint specifies that execution should stop when a particular event
occurs.

*****

GDB applies different statuses to breakpoints (and watchpoints and
catchpoints). They may be enabled, which means that the program stops when
the breakpoint is hit (or fires); disabled, which means that GDB keeps
track of them but that they don't affect execution; or deleted, which means
that GDB forgets about them completely. As a special case, breakpoints can
be enabled only once. Such a breakpoint stops execution when it is
encountered, then becomes disabled (but not forgotten).Breakpoints may have
conditions associated with them. When execution reaches the breakpoint, GDB
checks the condition, stopping the program only if the condition is true.
Breakpoints may also have an ignore count, which is a count of how many
times GDB should ignore the breakpoint when it's reached. As long as a
breakpoint's ignore count is nonzero, GDB does not bother checking any
condition associated with the breakpoint.

*****

Both Emacs- and vi-style editing commands are available.

*****

you can define special hook commands, which are user-defined commands that
GDB executes before or after running a built-in command.

*****

GDB is typically used to debug programs on the same machine (host) on which
it's running. GDB can also be configured for cross-debugging=E2=80=94i.e.,
controlling a remote debuggee with a possibly different machine
architecture (the target). Remote targets are usually connected to the host
via a serial port or a network connection.

*****

GDB is invoked as follows:

*****

gdb [options] [executable [corefile-or-PID]]

*****

gdb [options] --args executable [program args ...]

*****

The gdbtui command is equivalent to gdb --tui; it invokes GDB with the Text
User Interface (TUI).

*****

GDB has both traditional short options and GNU-style long options. Long
options may start with either one or two hyphens. The command-line options
are as follows.

*****

--argsPass on arguments after executable to the program being debugged.

*****

--async, --noasyncEnable/disable the asynchronous version of the
command-line interface.

*****

-b baudrate, --baud baudrateSet the serial port baud rate used for remote
debugging.

*****

--batchProcess options and then exit.

*****

--cd dirChange current directory to dir.

*****

-c file, --core fileAnalyze the core dump file.

*****

-d dir, --directory dirSearch for source files in dir.

*****

-e file, --exec fileUse file as the executable.

*****

-n, --nxDo not read the .gdbinit file.

*****

-p pidnum, -c pidnum, --pid pidnumAttach to running process pidnum.

*****

-q, --quiet, --silentDo not print the version number on startup.

*****

-s file, --symbols fileRead symbols from file.

*****

-t device, --tty deviceUse device for input/output by the program being
debugged.

*****

--tuiUse the Terminal User Interface (TUI).

*****

-x file, --command fileExecute GDB commands from file.

*****

--writeAllow writing into executable and core files.

*****

At startup, GDB reads its initialization file. This is a file of commands,
such as option settings, for example, that you tell GDB to run every time
it starts up.

*****

Empty lines (they do nothing) are allowed, and comments in initialization
files start with a # and continue to the end of the line.

*****

GDB executes commands from initialization files and from the command line
in the following order:

*****

$HOME/.gdbinit. This acts as a "global" initialization

*****

Command-line options and operands.

*****

Commands in ./.gdbinit. This allows for option settings that apply to a
particular program by keeping the file in the same directory as the
program's source code.

*****

Command files specified with the -x option.

*****

You may use either vi- or Emacs-style commands for editing your command
line. The readline library reads the file ~/.inputrc to initialize its
settings and options.

*****

set editing-mode vi

*****

set horizontal-scroll-mode On

*****

control-h: backward-delete-char

*****

set comment-begin #

*****

set expand-tilde On

*****

"\C-r": redraw-current-line

*****

Every time you print a value with print, GDB saves the value in the value
history. You can reference these saved values by their numeric place in the
history, preceded with a $. GDB reminds you of this by printing $n=3Dval.

*****

A plain $ refers to the most recent value in the value history.

*****

If you've just looked at a pointer variable, you can use:
(gdb) print *$
to print the contents of whatever the pointer is pointing to.

*****

$$ refers to the next most recent value in the history, and $$n refers to
the value n places from the end. (Thus, $n counts from the beginning, while
$$n counts from the end.)

*****

You can use show values to see the values in the history.

*****

GDB lets you create convenience variables. These are variables you can use
to store values as you need them. Their names begin with a $ and consist of
alphanumeric characters and underscores. They should start with a letter or
underscore.

*****

(gdb) set $j =3D 0
(gdb) print data[$j++]

*****

GDB predefines several convenience variables. It also enables you to access
the machine registers using predefined register names. Register names vary
with machine architecture, of course, but there are four predefined
registers available on every architecture.
The following list summarizes the convenience variables and predefined
registers. The last four entries in the list are the registers that are
always available.
$The most recent value in the va
lue history.
$nItem n in the value history.
$$The next to last item in the va
lue history.
$$nItem n in the value history, co
unting from the end.
$_The address last printed by the
x command.
$_ _The contents of the address last
printed by the x command.
$_exitcodeThe exit status that the debug
gee returned when it exited.
$bpnumThe breakpoint number of the
most recently set breakpoint.
$cdirThe compilation directory for
the current source file, if one is recorded in the object file.
$cwdThe current working directory.
$fpThe frame pointer register.
$pcThe program counter register.
$psThe processor status register.
$spThe stack pointer register.

*****

Special Expressions

*****

You can create an array constant in the debuggee's memory by enclosing a
list of element values in braces. For example, { 1, 2, 3, 42, 57 }.

*****

The @ array operator prints all the elements of an array up to a given
subscript. For example, if your program uses malloc( ) to allocate memory:
double *vals =3D malloc(count * sizeof(double));
you can print a single element using regular subscripting:
(gdb) print vals[3]
$1 =3D 9
However, you can access vals[0] through vals[2] with:
(gdb) print *vals@3
$2 =3D {0, 1, 4}

*****

File resolution

*****

If you use the same variable name in several source files (for example,
each one is static), you can specify which one you mean using
file::variable. For example:
(gdb) print 'main.c'::errcount
$2 =3D 0
It is necessary to put main.c in single quotes to avoid ambiguity with the
C++ :: operator.

*****

set and show Commands

*****

The show command displays the values of the same parameters as set accepts.

*****

For most of the options, setoption and setoptionon are equivalent; they
enable the option. Use setoptionoff to disable the option.

*****

set annotate level
show annotate
Set the annotation_level variable to level. GUI programs that call GDB as a
subsidiary process use this variable.

*****

set architecture architecture
show architecture
Set the architecture of target to architecture. Primarily used in
cross-debugging.

*****

set args
show args
Give the debuggee the argument list when you start it. The run command uses
this list when it isn't given any arguments.

*****

set backtrace limit count
show backtrace limit
set backtrace past-main
show backtrace past-main
The first syntax limits the number of stack frames shown in a backtrace to
count. The default is unlimited. The second syntax controls whether GDB
shows information about frames that precede the main( ) function. Such
startup code is usually not of interest, thus the default is off.

*****

set breakpoint pending val
show breakpoint pending
How GDB should handle breakpoint locations that can't be found (for
example, if a shared library has yet to be loaded). Values are on, off, or
auto. When val is on, GDB automatically creates a pending breakpoint. For
auto, it asks you. For off, pending breakpoints are not created.

*****

set can-use-hw-watchpoints value
show can-use-hw-watchpoints
If nonzero, GDB uses hardware support for watchpoints, if the system has
such support. Otherwise, it doesn't.

*****

set case-sensitive
show case-sensitive
Set whether GDB should ignore case when searching for symbols. This
variable can be set to on, off, or auto. For auto, the case sensitivity
depends upon the language.

*****

show commands [cmdnum]
show commands +
By default, show the last 10 commands in the command history. With a
numeric cmdnum, show the 10 commands centered around cmdnum. The second
syntax shows the 10 commands following those just printed.

*****

set complaints limit
show complaints
When GDB encounters problems reading in symbol tables, it normally does not
complain. By setting this variable, GDB produces up to limit complaints
about each kind of problem it finds. The default is 0, which creates no
complaints. Use a large number to mean "unlimited."

*****

set confirm
show confirm
GDB normally asks for confirmation before certain operations, such as
deleting breakpoints. Set this value to off to disable confirmation. Do
this only if you're really sure that you know what you're doing.

*****

show convenience
Print a list of convenience variables used so far, along with their values.
Can be abbreviated to show conv.

*****

set debug-file-directory dir
show debug-file-directory
Look in dir for separate debugging information files. For use on systems
where debugging information is not included in executable files.

*****

set demangle-style style
show demangle-style
Choose the scheme used to convert a "mangled" name back into the original
Objective C or C++ name

*****

armUse the algorithm
given in The Annotated C++ Reference Manual. The GDB documentation warns
that this setting alone does not allow debugging of code produced by
cfront.[a]
autoGDB attempts to fi
gure out the demangling style.
gnuUse the same sche
me as that of the GNU C++ compiler (g++). This is the default.
hpUse the scheme of
HP's ANSI C++ compiler, aCC.
lucidUse the scheme
from Lucid's C++ compiler, lcc.

*****

show directories
Print the current search path of directories that contain source files.

*****

set disassembly-flavor flavor
show disassembly-flavor
The current instruction set for printing machine-level instructions. This
command is currently defined only for the Intel x86 architecture. The
flavor is either intel or att; the default is att.

*****

set editing
show editing
Enable editing of command lines as they are typed.

*****

set environment variable[=3Dvalue]
show environment [variable]
Set environment variable variable to optional value or to the empty string.
With no variable, show the entire environment. Otherwise, show the value of
the given variable.

*****

set exec-done-display
show exec-done-display
Enable notification of completion for asynchronous execution commands.

*****

set extension-language .ext lang
show extension-language
Associate filename extension .ext with programming language lang.

*****

set follow-fork-mode mode
show follow-fork-mode
Choose which process GDB should continue to debug when the debuggee creates
a new process. The value of mode is parent if GDB should follow the parent,
or child if GDB should follow the child.

*****

set height count
show height
The number of lines GDB thinks are in a page. Use 0 to keep GDB from
pausing.

*****

set history expansion

show history expansion
Use csh-style ! commands for history operations. The default is off.

*****

set history filenamefile

show history filename
Save the command history to file, and restore it from there upon startup.
This overrides the default filename, which is taken from the value of the
environment variable GDBHISTFILE if it is set. Otherwise, the default
filename is ./.gdb_history.

*****

set history save

show history save
Enable saving/restoring of the command history.

*****

set history sizeamount
show history size
Limit the number of saved history commands to amount.

*****

set input-radix base
show input-radix
The default input radix for entering numbers. Acceptable values for base
are 8, 10, and 16. The value must be entered unambiguously (leading 0 for
octal, leading 0x or 0X for hexadecimal), or in the current input radix.

*****

set language lang
show language
Set the source language to lang. Normally, GDB is able to determine the
source language from information in the executable file.

*****

set listsize count
show listsize
The number of source lines GDB lists with the list command.

*****

set logging
set logging option value
show logging
With the usual on and off values, set logging enables and disables logging
of GDB command output. With an option and value, the particular logging
option is set to value.

*****

fileThe file to which GDB logs com
mand output. The default is gdb.txt.
overwriteIf set, overwrite the log file
each time. Otherwise, GDB appends to it.
redirectIf set, send output to the log fi
le only. The default outputs to both the terminal and the log file.

*****

set max-user-call-depth limit
show max-user-call-depth
Set the maximum number of recursive calls to a user-defined command to
limit. When the limit is exceeded, GDB assumes that the command has gone
into infinite recursion and aborts with an error.

*****

set output-radix base
show output-radix
The default output radix for displaying numbers. Acceptable values for base
are 8, 10, and 16. The value must be entered unambiguously (leading 0 for
octal, leading 0x or 0X for hexadecimal), or in the current input radix.

*****

set overload-resolution
show overload-resolution
When calling an overloaded function from GDB, search for a function whose
signature matches the types of the arguments.

*****

set pagination
show pagination
Enable/disable pagination of output. Default is on.

*****

show paths
Display the current search path for executable programs (the PATH
environment variable). This path is also used to find object files.

*****

set print address, show print addressInclude the program counter in stack
frame information.

*****

set print array, show print arrayPrettyprint arrays. This is easier to read
but takes up more space. Default is off.

*****

set print asm-demangle, show print asm-demangleDemangle C++/Objective C
names, even in disassembly listings.

*****

set print demangle, show print demangleDemangle C++/Objective C names in
output.

*****

set print elements count, show print elementsPrint no more than count
elements from an array. The default is 200; a value of 0 means "unlimited."

*****

set print null-stop, show print null-stopStop printing array elements upon
encountering one set to zero (ASCII NUL for character arrays, hence the
name). Default is off.

*****

set print object, show print objectFor a pointer, print the pointed-to
object's actual type, which is derived from virtual function table
information, instead of the declared type. The default is off, which prints
the declared type.

*****

set print pascal_static-members

show print pascal_static-members
Print Pascal static members.

*****

set print pretty, show print prettyPrettyprint structures, one element per
line, with indentation to convey nesting.

*****

set print sevenbit-strings

show print sevenbit-strings
Print 8-bit characters in strings as \nnn.

*****

set print static-members

show print static-members
Print static members when displaying a C++ object.

*****

set print symbol-filename

show print symbol-filename
When printing the symbolic form of an address, include the source filename
and line number.

*****

set print vtbl, show print vtblPrettyprint C++ virtual function tables. The
default is off.

*****

set print max-symbolic-offsetmax

show print max-symbolic-offset
When displaying addresses, only use the symbol + offset form if the offset
is less than max. The default is 0, which means "unlimited."

*****

set prompt string
show prompt
Set GDB's prompt to string, or show the prompt string. The default prompt
is (gdb).

*****

set radix base
show radix
Set the input and output radixes to the same number. Acceptable values for
base are 8, 10, and 16. The value must be entered unambiguously (leading 0
for octal, leading 0x or 0X for hexadecimal), or in the current input radix=
.

*****

set scheduler-locking
show scheduler-locking
On some operating systems, control the scheduling of other threads (those
not being traced) in the debuggee. The value is one of on, off, or step. If
set to off, all threads run, with the chance that a different thread could
pre-empt the debugger (hit a breakpoint, catch a signal, etc.). When set to
on, GDB allows only the current thread to run. When set to step, the
scheduler locks only during single-stepping operations.

*****

set step-mode
show step-mode
Set the mode of the step command. By default, step does not enter functions
that lack debugging information. Setting this variable to on causes GDB to
enter such functions, allowing you to examine the machine level
instructions.

*****

show values [valnum]
show values +
With no arguments, print the last 10 values in the value history

*****

set variable assignment
Ensure that assignment actually affects a program variable instead of a GDB
variable.

*****

set verbose
show verbose
Enable display of informative messages during long operations. This
reassures you that GDB is still alive.

*****

set watchdog seconds
show watchdog
Wait no more than seconds seconds for a remote target to finish a low-level
stepping or continuation operation. If the timeout expires, GDB reports an
error.

*****

set width numchars
show width
Set the number of characters allowed in a line. Use a value of 0 to keep
GDB from wrapping long lines.

*****

set write
show write
Allow GDB to write into the executable and core files. The default is off.

*****

The info command displays information about the state of the debuggee (as
opposed to show, which provides information about internal GDB features,
variables, and options). With no arguments, it provides a list of possible
features about which information is available.

*****

addresssymInformation about
where symbol sym is stored. This is either a memory address or a register
name.

*****

all-registersInformation about
all registers, including floating-point registers.

*****

argsInformation about
the arguments to the current function (stack frame).

*****

break [bpnum]Information about
breakpoint bpnum if given, or about all breakpoints if not.

*****

breakpoints [bpnum]Same information
as the info break command.

*****

catchInformation on ex
ception handlers active in the current frame.

*****

displayInformation about
items in the automatic display list.

*****

extensionsInformation about
the correspondence of filename extensions to source code programming
languages.

*****

f [address]Same information
as the info frame command.

*****

filesInformation about
the current debugging target, including the current executable, core, and
symbol files.

*****

floatInformation about
the floating-point hardware.

*****

frame [address]With no argument,
print information about the current frame. With an address, print
information about the frame containing address, but do not make it the
current frame.

*****

[regexp]With no argument,
print the names and types of all functions. Otherwise, print information
about functions whose names match regexp.

*****

handleThe list of all sig
nals and how GDB currently treats them.

*****

lineline-specThe starting and en
ding address for the code containing the line specified by line-spec. See
list in the "Alphabetical Summary of GDB Commands" section for a
description of line-spec. This sets the default address to the starting
address for the given line, so that x/i may be used to examine instructions=
.

*****

localsInformation about
local variables (static or automatic) accessible from the current frame.

*****

macromacronameShow the definition
and source location for the macro macroname.

*****

memInformation about
memory regions and their attributes.

*****

proc [item]Information about
the running debuggee. Available on systems that supply /proc. The optional
item is one of: mappings for available address ranges and how they may be
accessed, times for starting time and user and system CPU time, id for
process ID information, status for general status of the process, or all
for all of the above.

*****

programInformation about
the running debuggee, such as running or stopped, and the process ID.

*****

registers [reg ...]With no arguments,
information about all machine registers except floating-point registers.
Otherwise, information about the named registers.

*****

sSame information
as the info stack command (which is the same as the backtrace command).

*****

scopeaddressInformation about
variables local to the scope containing address, which can be a function
name, source line, or absolute address preceded by *.

*****

selectors [regexp]Information about
Objective-C selectors that match regexp, or about all selectors if regexp
is not given.

*****

setSame as the show
command with no arguments.

*****

shareSame as the info sha
redlibrary command.

*****

sharedlibraryInformation about
currently loaded shared libraries.

*****

signalSame as the info han
dle command.

*****

sourceInformation about
the source file, such as compilation directory, programming language, and
debugging information.

*****

sourcesInformation about
all source files that have debugging information. The output is split into
two lists: those whose information has already been read, and those whose
information will be read when needed.

*****

stackSame information
as the backtrace command.

*****

symboladdressThe name of the
symbol (function, variable, etc.) stored at address address.

*****

targetIdentical to the info
files command.

*****

terminalCurrent terminal
modes settings.

*****

threadsAll the program's
current threads.

*****

types [regexp]Information about
types that match regexp, or about all types in the program if regexp is not
given.

*****

variables [regexp]With no argument,
print the names and types of all variables except for local variables.
Otherwise, print information about variables whose names match regexp.

*****

watchpoints [wpnum]Information about
watchpoint wpnum, or about all watchpoints if wpnum is not given.

*****

winThe names and si
zes of all displayed TUI windows.

